# Maze

Реализация проекта Maze.


## Contents

1. [Chapter I](#chapter-i) \
    1.1. [Introduction](#introduction)
2. [Chapter II](#chapter-ii) \
    2.1. [Information](#information)
3. [Chapter III](#chapter-iii) \
    3.1. [Part 1](#part-1-реализация-проекта-maze) \
    3.2. [Part 2](#part-2-генерация-идеального-лабиринта) \
    3.3. [Part 3](#part-3-решение-лабиринта) \
    3.4. [Part 4](#part-4-дополнительно-генерация-пещер) \
    3.5. [Part 5](#part-5-дополнительно-ml-обучение-с-подкреплением) \
    3.6. [Part 6](#part-6-дополнительно-web-интерфейс) 


## Chapter I

![Maze](misc/images/A1_Maze.jpg)

Ева подошла к кабинету начальства ровно в тот момент, когда из него послышались приглушенные крики знакомого голоса:

`-` Как ... додуматься открыть ...туп в ИНТЕРНЕТ эти..рверам?! А самое главное зачем ...лы?!

Заходить сейчас в кабинет было явно не лучшей идеей, поэтому Ева решила переждать явно неприятный разговор в коридоре. \
После неразборчивого ответа, возмущения босса продолжились:

`-` Вы видимо совсем не осознаете важность этого проекта для нашей... Это... А сейчас бегом исправлять все эти косяки!

Дверь в кабинет приоткрылась, откуда поспешно выходили Алиса с Чарли с потупленным взором.

`-` И не дай бог что-то вдруг утекло! - раздалось им вдогонку.

Алиса и Чарли удалились в противоположном направлении, даже не обратив на стоящую рядом Еву внимания. Подождав пару минут, она набралась сил и постучала в дверь.

`-` Войдите. А, Ева, да, заходи, - пригласил ее босс. Просторная комната с широкими окнами была заполнена различными книгами по алгоритмам, математике и программированию. В середине комнаты находился стол, на котором красовалась пластиковая табличка "Роберт М.".

`-` Боб, я по поводу экспериментов по задачке..

`-` С лабиринтами, да, знаю. Твои наработки протестировали. Они интересные, но слишком простые. Мы отправили примеры генераций нашим партнерам, но их детище прошло лабиринты за неприлично малый промежуток времени. А в нашем случае понадобится нечто еще сложнее. \
Попробуй уменьшить количество корректных путей. Просмотри интернет еще раз, посмотри в сторону пещер и клеточных автоматов, и тогда вернемся еще раз к тестам и экспериментам. И помни: чем сложнее - тем лучше!

Выйдя из кабинета, Ева отправилась к своему рабочему месту, обдумывая какие еще алгоритмы можно опробовать. По пути она попыталась найти глазами Алису или Чарли, чтобы узнать что случилось, но не найдя их села за компьютер и продолжила работу.

## Introduction

В данном проекте Вам предстоит познакомиться с лабиринтами и пещерами, а также основными алгоритмами их обработки, такими как: генерация, отрисовка, поиск решения.

## Chapter II

## Information

Лабиринт с "тонкими стенками" представляет собой таблицу размером _n_ строк на _m_ столбцов. 
Между ячейками таблицы могут находиться "стены". Также "стенами" окружена вся таблица в целом. 

Далее приведён пример такого лабиринта: \
![maze](misc/images/maze.jpg)

Решением лабиринта считается кратчайший путь от заданной начальной точки (ячейки таблицы) до конечной. 
При прохождении лабиринта можно передвигаться к соседним ячейкам, не отделенным "стеной" от текущей ячейки и находящимся сверху, снизу, справа или слева. 
Кратчайшим маршрут считается, если он проходит через наименьшее число ячеек.

Пример лабиринта с его решением: \
![solution](misc/images/solution.jpg)

В этом примере начальная точка задана, как 10; 1, а конечная, как 6; 10.

## Описание лабиринта

Лабиринт может храниться в файле в виде количества строк и столбцов, а также двух матриц, содержащих положение вертикальных и горизонтальных стен соответственно. 
В первой матрице отображается наличие стены справа от каждой ячейки, а во второй - снизу. 

Пример подобного файла:  
```
4 4
0 0 0 1
1 0 1 1
0 1 0 1
0 0 0 1

1 0 1 0
0 0 1 0
1 1 0 1
1 1 1 1
```

Лабиринт, описанный в этом файле: \
![maze4](misc/images/maze4.jpg)

Больше примеров описания лабиринтов можно найти в материалах.

## Недостатки лабиринтов

К недостаткам лабиринтов относятся изолированные области и петли.

Изолированная область - это часть лабиринта с проходами, в которые нельзя попасть из оставшейся части лабиринта. Например: \
![isolated](misc/images/isolated.png)

Петля - это часть лабиринта с проходами, по которым можно ходить "кругами". Стены в петлях не соединены со стенами, окружающими лабиринт. Например: \
![loop](misc/images/loop.png)

## Генерация с использованием клеточного автомата

Во многих играх есть необходимость в ветвящихся локациях, например пещерах. 
Такие локации могут быть созданы генерацией с использованием клеточного автомата. 
При подобной генерации используется идея, схожая с уже знакомой вам игрой "Жизнь". 
Суть предложенного алгоритма состоит в реализации всего двух шагов: 
сначала все поле заполняется случайным образом стенами — т.е. для каждой клетки случайным образом определяется, 
будет ли она свободной или непроходимой — а затем несколько раз происходит обновление состояния карты в соответствии с условиями, 
похожими на условия рождения/смерти в «Жизни».

Правила проще, чем в "Жизни" - есть две специальные переменные, одна для "рождения" "мертвых" клеток (предел "рождения") и одна для уничтожения "живых" клеток (предел "смерти"). 
Если "живые" клетки окружены "живыми" клетками, количество которых меньше, чем предел "смерти", они "умирают". 
Аналогично если "мертвые" клетки находятся рядом с "живыми", количество которых больше, чем предел "рождения", они становятся "живыми".

Пример результата работы алгоритма (на первой картинке только инициализированный лабиринт, а на второй лабиринт, в котором при последующих шагах больше не происходит изменений): \
![cave1](misc/images/cave1.jpg)
![cave2](misc/images/cave2.jpg)

## Описание пещер

Пещера, прошедшая 0 шагов симуляции (только инициализированная), может храниться в файле в виде количества строк и столбцов, 
а также матрицы, содержащей положение "живых" и "мертвых" клеток.

Пример подобного файла:
```
4 4
0 1 0 1
1 0 0 1
0 1 0 0
0 0 1 1
```

Пещера, описанная в этом файле: \
![cave3](misc/images/cave3.jpg)

Больше примеров описания пещер можно найти в материалах.


## Chapter III

## Part 1. Реализация проекта Maze

Необходимо реализовать программу Maze, позволяющую генерировать и отрисовывать идеальные лабиринты и пещеры:

- Программа должна быть разработана на языке C
- При написании программы необходимо использовать стандартный для выбранного языка стиль написания кода
- Код программы должен находиться в папке src
- Сборка программы должна быть настроена с помощью Makefile со стандартным набором целей для GNU-программ: all, install, uninstall, clean, tests. Установка должна вестись в любой другой произвольный каталог
- В программе должен быть реализован пользовательский интерфейс на базе консоли
- В программе предусмотрена опция для загрузки лабиринта из файла, который задается в формате, описанном [выше](#описание-лабиринта) 
- Максимальный размер лабиринта - 50х50
- Загруженный лабиринт должен быть отрисован на экране в консоли псевдографикой
- Толщина "стены" - 1 символ
- Размер самих ячеек лабиринта вычисляется таким образом, чтобы лабиринт занимал всё отведенное под него поле

## Part 2. Генерация идеального лабиринта

Добавить возможность автоматической генерации идеального лабиринта. \
Идеальным считается лабиринт, в котором из каждой точки можно попасть в любую другую точку ровно одним способом.

- Генерировать лабиринт нужно согласно **алгоритму Эллера**
- Сгенерированный лабиринт не должен иметь изолированных областей и петель
- Должно быть обеспечено полное покрытие unit-тестами модуля генерации идеального лабиринта
- Пользователем указывается только размерность лабиринта: количество строк и столбцов
- Сгенерированный лабиринт должен сохраняться в файл в формате, описанном [выше](#описание-лабиринта) 
- Созданный лабиринт должен отображаться на экране как указано в [первой части](#part-1-реализация-проекта-maze)

## Part 3. Решение лабиринта

Добавить возможность показать решение _любого_ лабиринта, который сейчас изображен на экране:
- Пользователем задаются начальная и конечная точки
- Маршрут, являющийся решением, отобразить "линией" толщиной 1 символ, проходящей через середины всех ячеек лабиринта, через которые пролегает решение
- Цвет линии решения должен быть отличным от цветов стен и поля
- Должно быть обеспечено полное покрытие unit-тестами модуля решения лабиринта

## Part 4. Дополнительно. Генерация пещер

Добавить генерацию пещер с [использованием клеточного автомата](#генерация-с-использованием-клеточного-автомата):
- Пользователем указывает файл, в котором описана пещера по описанному [выше](#описание-пещер) формату
- Максимальный размер пещеры - 50х50
- Загруженная пещера должна быть отрисована на экране в консоли псевдографикой
- Пользователем задаются пределы "рождения" и "смерти" клетки, а также шанс на начальную инициализацию клетки
- Пределы "рождения" и "смерти" могут иметь значения от 0 до 7
- Клетки за границей пещеры считаются живыми
- Должен быть предусмотрен пошаговый режим отрисовки результатов работы алгоритма в двух вариантах:
  - По выбору опции следующего шага отрисовывается очередная итерация работы алгоритма
  - По выбору опции автоматической работы запускается отрисовка итераций работы алгоритма с частотой 1 шаг в `N` миллисекунд, где число миллисекунд `N` задаётся отдельно пользователем
- Размер клеток в пикселях вычисляется таким образом, чтобы пещера занимала всё отведенное под него поле
- Должно быть обеспечено полное покрытие unit-тестами модуля генерации пещер

## Part 5. Дополнительно. ML. Обучение с подкреплением

С помощью обучения с подкреплением необходимо разработать алгоритм обучения агента кратчайшему прохождению лабиринтов:
- Пользователем указывается файл, в котором описана структура лабиринта, и конечная точка
- Агент должен быть способен находить выход из лабиринта из любой начальной точки
- Необходимо использовать метод Q-обучения
- Агент обучается на одном лабиринте, который не меняется ни в процессе обучения, ни на этапе тестирования; конечная точка также фиксирована
- Должно быть обеспечено полное покрытие unit-тестами модуля обучения агента

Требуется предоставить пользователю возможность взаимодействия с обученным агентом:
- Пользователь определяет начальную точку
- Построенный агентом маршрут из заданной точки отображается в соответствии с описанными выше правилами

Модули обучения агента и взаимодействия с ним должны быть разработаны на языке из перечня C без использования готовых библиотек обучения с подкреплением.

## Part 6. Дополнительно. Web-интерфейс

Добавить Web-версию пользовательского интерфейса в любом формате (MPA, SPA) с использованием соответствующих фреймворков. Web интерфейс должен удовлетворять как минимум всем базовым функциональным требованиям из частей выше ([Part 1](#part-1-реализация-проекта-maze)-[Part 3](#part-3-решение-лабиринта)).


